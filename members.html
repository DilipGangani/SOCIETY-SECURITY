<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SOCIETY SECURITY – Members</title>
  <link rel="stylesheet" href="style.css">
</head>
<button onclick="exportMembers()">Export Members (CSV)</button>
<body>

<h2>Members List</h2>
<a href="index.html">← Dashboard</a>

<table border="1" width="100%" cellpadding="8">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Age</th>
      <th>Status</th>
      <th>Insurance Active</th>
    </tr>
  </thead>
  <tbody id="membersTable"></tbody>
</table>

<script src="script.js"></script>
<script>
  function renderMembers() {
    const table = document.getElementById("membersTable");
    table.innerHTML = "";

    db.members.forEach(m => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${m.memberId}</td>
        <td>${m.name}</td>
        <td>${m.age}</td>
        <td>${m.status}</td>
        <td>${insuranceActive(m) ? "Yes" : "No"}</td>
      `;
      table.appendChild(row);
    });
    }
    function exportMembers() {
  const rows = db.members.map(m => ({
    memberId: m.memberId,
    name: m.name,
    age: m.age,
    gender: m.gender || "",
    contact: m.contact,
    address: m.address,
    status: m.status,
    insuranceActive: insuranceActive(m) ? "Yes" : "No",
    membershipStartDate: m.membershipStartDate,
    nominee1: m.nominee1?.name || "",
    nominee2: m.nominee2?.name || ""
  }));

  downloadCSV("society_members.csv", rows);
}

  setTimeout(renderMembers, 500);
</script>

</body>
</html>
